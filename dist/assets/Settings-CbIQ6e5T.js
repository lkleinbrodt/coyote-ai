import{w as C,r as j,j as e,C as h,x as m,y as u,v as p,J as f,K as g,D as a,L as v,M as N,N as y,ap as w,aq as I,O as D,ar as L,as as F,at as A,au as E}from"./index-OhQrO7aG.js";import{P as R,L as l}from"./label-n1B-E604.js";function k(){const{selectedProject:s,setSelectedProject:o}=C(),[d,x]=j.useState((s==null?void 0:s.name)||""),[r,t]=j.useState(!1);if(!s)return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Project Settings"}),e.jsx(R,{title:"No project selected",description:"Select a project to view its settings."})]});const c=async()=>{if(d.trim()&&s){t(!0);try{const i=await L(s.id,{name:d.trim()});o(i)}catch(i){console.error("Failed to rename project:",i)}finally{t(!1)}}},S=async()=>{t(!0);try{await F(s.id),o(null)}catch(i){console.error("Failed to delete project:",i)}finally{t(!1)}};return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Project Settings"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(h,{children:[e.jsx(m,{children:e.jsx(u,{children:"Project Information"})}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Project ID"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.id})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Index Status"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.index_available?"Indexed":"Not Indexed"})]})]})]}),e.jsxs(h,{children:[e.jsx(m,{children:e.jsx(u,{children:"Actions"})}),e.jsxs(p,{className:"flex flex-row justify-around",children:[e.jsxs(f,{children:[e.jsx(g,{asChild:!0,children:e.jsx(a,{variant:"outline",className:"w-1/3",disabled:r,children:r?"Saving...":"Rename Project"})}),e.jsxs(v,{children:[e.jsxs(N,{children:[e.jsx(y,{children:"Rename Project"}),e.jsx(w,{children:"Enter a new name for your project"})]}),e.jsxs("div",{className:"py-4",children:[e.jsx(l,{htmlFor:"name",children:"Project Name"}),e.jsx(I,{id:"name",value:d,onChange:i=>x(i.target.value),placeholder:"Enter new project name"})]}),e.jsx(D,{children:e.jsx(a,{variant:"outline",onClick:c,disabled:r,children:r?"Saving...":"Save Changes"})})]})]}),e.jsxs(f,{children:[e.jsx(g,{asChild:!0,children:e.jsx(a,{variant:"destructive",className:"w-1/3",disabled:r,children:r?"Deleting...":"Delete Project"})}),e.jsxs(v,{children:[e.jsxs(N,{children:[e.jsx(y,{children:"Delete Project"}),e.jsx(w,{children:"Are you sure you want to delete this project? This action cannot be undone. All reports and files associated with this project will be permanently deleted."})]}),e.jsxs(D,{children:[e.jsx(a,{variant:"outline",children:"Cancel"}),e.jsx(a,{variant:"destructive",onClick:S,disabled:r,children:r?"Deleting...":"Delete"})]})]})]})]})]})]})]})}function T(){const{selectedReport:s,setSelectedReport:o,setAvailableReports:d}=C(),[x,r]=j.useState((s==null?void 0:s.name)||""),[t,c]=j.useState(!1);if(!s)return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Report Settings"}),e.jsx(R,{title:"No report selected",description:"Select a report to view its settings."})]});const S=async()=>{if(x.trim()&&s){c(!0);try{const n=await A(s.id,{name:x.trim()});o(n),d(b=>b.map(P=>P.id===s.id?n:P))}catch(n){console.error("Failed to rename report:",n)}finally{c(!1)}}},i=async()=>{c(!0);try{await E(s.id),d(n=>n.filter(b=>b.id!==s.id)),o(null)}catch(n){console.error("Failed to delete report:",n)}finally{c(!1)}};return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Report Settings"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(h,{children:[e.jsx(m,{children:e.jsx(u,{children:"Report Information"})}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Report ID"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.id})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Created"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(s.created_at).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Last Modified"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(s.updated_at).toLocaleDateString()})]})]})]}),e.jsxs(h,{children:[e.jsx(m,{children:e.jsx(u,{children:"Actions"})}),e.jsxs(p,{className:"flex flex-row justify-around",children:[e.jsxs(f,{children:[e.jsx(g,{asChild:!0,children:e.jsx(a,{variant:"outline",className:"w-1/3 justify-center",disabled:t,children:t?"Saving...":"Rename Report"})}),e.jsxs(v,{children:[e.jsxs(N,{children:[e.jsx(y,{children:"Rename Report"}),e.jsx(w,{children:"Enter a new name for your report"})]}),e.jsxs("div",{className:"py-4",children:[e.jsx(l,{htmlFor:"name",children:"Report Name"}),e.jsx(I,{id:"name",value:x,onChange:n=>r(n.target.value),placeholder:"Enter new report name"})]}),e.jsx(D,{children:e.jsx(a,{variant:"outline",onClick:S,disabled:t,children:t?"Saving...":"Save Changes"})})]})]}),e.jsxs(f,{children:[e.jsx(g,{asChild:!0,children:e.jsx(a,{variant:"destructive",className:"w-1/3 justify-center",disabled:t,children:t?"Deleting...":"Delete Report"})}),e.jsxs(v,{children:[e.jsxs(N,{children:[e.jsx(y,{children:"Delete Report"}),e.jsx(w,{children:"Are you sure you want to delete this report? This action cannot be undone."})]}),e.jsxs(D,{children:[e.jsx(a,{variant:"outline",children:"Cancel"}),e.jsx(a,{variant:"destructive",onClick:i,disabled:t,children:t?"Deleting...":"Delete"})]})]})]})]})]})]})]})}function H(){const{selectedProject:s}=C();return s?e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsx(k,{}),e.jsx(T,{})]}):e.jsx("div",{children:e.jsx(R,{title:"No project selected",description:"Select a project to get started."})})}export{H as default};
