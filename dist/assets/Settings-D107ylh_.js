import{w as b,r as x,j as e,C as h,x as m,y as u,v as p,J as f,K as g,D as n,L as v,M as N,N as y,as as w,at as L,O as D,au as F,av as I,aw as A,ax as E}from"./index-BZtEtTms.js";import{P as R,L as d}from"./label-DslQTc7R.js";function k(){const{selectedProject:s,setSelectedProject:o}=b(),[l,j]=x.useState((s==null?void 0:s.name)||""),[r,t]=x.useState(!1);if(!s)return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Project Settings"}),e.jsx(R,{title:"No project selected",description:"Select a project to view its settings."})]});const c=async()=>{if(l.trim()&&s){t(!0);try{const i=await F(s.id,{name:l.trim()});o(i)}catch(i){console.error("Failed to rename project:",i)}finally{t(!1)}}},S=async()=>{t(!0);try{await I(s.id),o(null)}catch(i){console.error("Failed to delete project:",i)}finally{t(!1)}};return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Project Settings"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(h,{children:[e.jsx(m,{children:e.jsx(u,{children:"Project Information"})}),e.jsx(p,{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(d,{children:"Project ID"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.id})]})})]}),e.jsxs(h,{children:[e.jsx(m,{children:e.jsx(u,{children:"Actions"})}),e.jsxs(p,{className:"flex flex-row justify-around",children:[e.jsxs(f,{children:[e.jsx(g,{asChild:!0,children:e.jsx(n,{variant:"outline",className:"w-1/3",disabled:r,children:r?"Saving...":"Rename Project"})}),e.jsxs(v,{children:[e.jsxs(N,{children:[e.jsx(y,{children:"Rename Project"}),e.jsx(w,{children:"Enter a new name for your project"})]}),e.jsxs("div",{className:"py-4",children:[e.jsx(d,{htmlFor:"name",children:"Project Name"}),e.jsx(L,{id:"name",value:l,onChange:i=>j(i.target.value),placeholder:"Enter new project name"})]}),e.jsx(D,{children:e.jsx(n,{variant:"outline",onClick:c,disabled:r,children:r?"Saving...":"Save Changes"})})]})]}),e.jsxs(f,{children:[e.jsx(g,{asChild:!0,children:e.jsx(n,{variant:"destructive",className:"w-1/3",disabled:r,children:r?"Deleting...":"Delete Project"})}),e.jsxs(v,{children:[e.jsxs(N,{children:[e.jsx(y,{children:"Delete Project"}),e.jsx(w,{children:"Are you sure you want to delete this project? This action cannot be undone. All reports and files associated with this project will be permanently deleted."})]}),e.jsxs(D,{children:[e.jsx(n,{variant:"outline",children:"Cancel"}),e.jsx(n,{variant:"destructive",onClick:S,disabled:r,children:r?"Deleting...":"Delete"})]})]})]})]})]})]})]})}function T(){const{selectedReport:s,setSelectedReport:o,setAvailableReports:l}=b(),[j,r]=x.useState((s==null?void 0:s.name)||""),[t,c]=x.useState(!1);if(!s)return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Report Settings"}),e.jsx(R,{title:"No report selected",description:"Select a report to view its settings."})]});const S=async()=>{if(j.trim()&&s){c(!0);try{const a=await A(s.id,{name:j.trim()});o(a),l(C=>C.map(P=>P.id===s.id?a:P))}catch(a){console.error("Failed to rename report:",a)}finally{c(!1)}}},i=async()=>{c(!0);try{await E(s.id),l(a=>a.filter(C=>C.id!==s.id)),o(null)}catch(a){console.error("Failed to delete report:",a)}finally{c(!1)}};return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Report Settings"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(h,{children:[e.jsx(m,{children:e.jsx(u,{children:"Report Information"})}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Report ID"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.id})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Created"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(s.created_at).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Last Modified"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(s.updated_at).toLocaleDateString()})]})]})]}),e.jsxs(h,{children:[e.jsx(m,{children:e.jsx(u,{children:"Actions"})}),e.jsxs(p,{className:"flex flex-row justify-around",children:[e.jsxs(f,{children:[e.jsx(g,{asChild:!0,children:e.jsx(n,{variant:"outline",className:"w-1/3 justify-center",disabled:t,children:t?"Saving...":"Rename Report"})}),e.jsxs(v,{children:[e.jsxs(N,{children:[e.jsx(y,{children:"Rename Report"}),e.jsx(w,{children:"Enter a new name for your report"})]}),e.jsxs("div",{className:"py-4",children:[e.jsx(d,{htmlFor:"name",children:"Report Name"}),e.jsx(L,{id:"name",value:j,onChange:a=>r(a.target.value),placeholder:"Enter new report name"})]}),e.jsx(D,{children:e.jsx(n,{variant:"outline",onClick:S,disabled:t,children:t?"Saving...":"Save Changes"})})]})]}),e.jsxs(f,{children:[e.jsx(g,{asChild:!0,children:e.jsx(n,{variant:"destructive",className:"w-1/3 justify-center",disabled:t,children:t?"Deleting...":"Delete Report"})}),e.jsxs(v,{children:[e.jsxs(N,{children:[e.jsx(y,{children:"Delete Report"}),e.jsx(w,{children:"Are you sure you want to delete this report? This action cannot be undone."})]}),e.jsxs(D,{children:[e.jsx(n,{variant:"outline",children:"Cancel"}),e.jsx(n,{variant:"destructive",onClick:i,disabled:t,children:t?"Deleting...":"Delete"})]})]})]})]})]})]})]})}function _(){const{selectedProject:s}=b();return s?e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsx(k,{}),e.jsx(T,{})]}):e.jsx("div",{children:e.jsx(R,{title:"No project selected",description:"Select a project to get started."})})}export{_ as default};
